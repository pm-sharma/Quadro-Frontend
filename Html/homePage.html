<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../Styles/home.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  
  <title>Home</title>
</head>


<body>

  <div class="container-fluid">
    <div class="row">
      <div class="col-12" style="position: relative">
        <div style="position: absolute;margin-top: -16px; left : 0; display: inline-block">
          &nbsp;<img style="height: 100px;width: 100px;" src="../Assets/quadro after login.svg" alt="Quadro">
        </div>
        <!-- <div style="display: inline-block; position: absolute; left : 100px; line-height: 90px">
          Quadro
        </div> -->
        <div
          style="position: absolute; right : 0;border: 2px solid #F6C331;border-radius: 50%;margin-top:10px;margin-right: 5px">
          <a href="profile.html"><img style="height: 40px;width: 40px;" src="../Assets/person.png" alt="Profile"></a>
        </div>
      </div>


      <div class="col-12"
        style="height : 60px;position: relative;margin-top:65px;box-shadow: -1px 3px 0px 1px rgba(0,0,0,0.08)">
        <div style="position: absolute; height: 60px; right : 0;font-size:30px;cursor:pointer" onclick="openNav()">
          <img style="height: 30px;width: 90px;" src="../Assets/filters.svg" alt="Filter">&nbsp;
        </div>
      </div>


      <!-- 
      <div class="col-md-12 positionFixForDevices">
        <div class="input-group" id="adv-search">
          <input style="border-radius: 10px" type="text" class="form-control" placeholder="Search" />
          <div class="input-group-btn" style="margin-left: -40px">
            <div style="border-radius: 10px" class="btn-group" role="group">
              <div class="dropdown dropdown-lg">
                <button style="box-shadow: none;" type="button" class="btn btn-default dropdown-toggle"
                  data-toggle="dropdown" aria-expanded="false"><span class="caret"></span></button>
                <div class="dropdown-menu dropdown-menu-right" role="menu"
                  style="margin-top: 20px;padding:25px;border-radius: 10px">
                  <form class="form-horizontal" role="form">
                    <div class="form-group">
                      <label for="contain">Name</label>
                    </div>
                    <div class="form-group">
                      <label for="filter">Domain</label>
                    </div>
                    
                    <div class="form-group">
                      <label for="filter">Email Id</label>
                    </div>
                    <div class="form-group">
                      <label for="contain">Gender</label>
                    </div>
                    <div class="form-group">
                      <label for="contain">Experience</label>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>

  <div class="container-fluid">


    <div class="row" id="cards" style="background-color: #F4F4F4;padding: 40px">


    </div>


  </div>

  <div id="mySidenav" class="sidenav" style="margin-top:130px">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <!-- <a href="#">About</a>
        <a href="#">Services</a>
        <a href="#">Clients</a>
        <a href="#">Contact</a> -->
    <div class="accordion" id="accordionExample">
      <div class="card">
        <div class="card-header" id="headingOne">
          <h5 class="mb-0">
            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
              aria-expanded="true" aria-controls="collapseOne">
              Select and Enter the filter value
            </button>
          </h5>
        </div>

        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
          <div class="card-body">
            <select id="select" style="width: 260px;height: 38px;">
              <option value="DOMAIN">Domain</option>
              <option value="EXPERIENCE">Experience</option>
              <option value="GENDER">Gender</option>
              <option value="NAME">Name</option>
              <option value="EMAIL">Email</option>
              <option value="AGE">Age</option>
            </select><br><br>
            <input id="value" style="width: 260px;height: 38px;" type="text" placeholder="Type here" />
          </div>
        </div>
      </div>

      <button id="btn-filter">Filter</button>
      <!-- <div class="card">
        <div class="card-header" id="headingTwo">
          <h5 class="mb-0">
            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo"
              aria-expanded="false" aria-controls="collapseTwo">
              Input 2
            </button>
          </h5>
        </div>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
          <div class="card-body">
            Lorem ipsum, dolor sit amet consectetur adipisicing elit. Fuga molestias nihil asperiores. Maiores, placeat
            expedita vel aperiam dolore eaque consequuntur sint praesentium sunt explicabo, cum molestiae sahii
            hainntium id
            ipsam inventore! </div>
        </div>
      </div> -->
      <div class="card">
        <div class="card-header" id="headingThree">
          <h5 class="mb-0">
            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree"
              aria-expanded="false" aria-controls="collapseThree">
              Rating
            </button>
          </h5>
        </div>
        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
          <div>
            <div class="rating">
              <input type="radio" id="star5" name="rating" value="5" /><label for="star5"></label>
              <input type="radio" id="star4" name="rating" value="4" /><label for="star4"></label>
              <input type="radio" id="star3" name="rating" value="3" /><label for="star3"></label>
              <input type="radio" id="star2" name="rating" value="2" /><label for="star2"></label>
              <input type="radio" id="star1" name="rating" value="1" /><label for="star1"></label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function openNav() {
      document.getElementById("mySidenav").style.width = "320px";
    }

    function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
    }
  </script>

  <!-- https://dscquadro.herokuapp.com/secure/filterdata?sort=-_id&limit=10&query={} -->
  <script>
    // filter query

    document.getElementById("btn-filter").addEventListener("click", (e) => {
      let query = {}
      let select = document.getElementById("select").value
      let input = document.getElementById("value").value
      console.log(select, input)
      query[select] = {
        $regex: input,
        $options: "i"
      }
      console.log(query)
      query = JSON.stringify(query)

      fetch("https://dscquadro.herokuapp.com/secure/filterdata?sort=-_id&limit=10&query=" + query, {
        method: "get",
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json',
          'Authorization': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3RAdGVzdC5jb20iLCJpYXQiOjE1NjEyNDgyMTl9.72ssLjjKFhNEX397D0IVlZDem33joyg51FSP9LKR42E'
        },
      })
        .then((response) => {
          return response.json()
        })
        .then(data => { 
          console.log(data)
          console.log(data.data)
          document.getElementById("cards").innerHTML = "";
          makeCard(data.data);
        })
    })


    window.onload = () => {
      let data = fetch(`https://dscquadro.herokuapp.com/secure/filterdata?sort=-_id&limit=10&query={}`, {
        method: "get",
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json',
          'Authorization': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InRlc3RAdGVzdC5jb20iLCJpYXQiOjE1NjEyNDgyMTl9.72ssLjjKFhNEX397D0IVlZDem33joyg51FSP9LKR42E'
        },
      })
        .then((response) => {
          return response.json()
        })
        .then(data => {
          return data
        })

      data.then(arr => {
        console.log(arr)
        makeCard(arr.data);
      })
    }

    function makeCard(data) {
      data.forEach(ele => {
        let divTop = document.createElement("div");
        divTop.setAttribute("style", "padding : 10px");
        divTop.setAttribute("class", "col-12 col-md-6 col-lg-4");
        let divTopCover = document.createElement("div");
        divTopCover.setAttribute("style", "background-color: #FFFFFF;border-radius: 10px;  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 6px 10px 0 rgba(0, 0, 0, 0.2); padding : 20px");
        let divRowOne = document.createElement("div");
        divRowOne.setAttribute("class", "row");
        let oneCol6a = document.createElement("div");
        oneCol6a.setAttribute("class", "col-6");
        oneCol6a.setAttribute("style", "text-align : center")
        let avail = document.createElement("div");
        avail.setAttribute("class", "circle")
        if (ele.AVAILABLE == true) {
          avail.setAttribute("style", "background-color : green");
          oneCol6a.appendChild(avail)
        } else {
          avail.setAttribute("style", "background-color : red");
          oneCol6a.appendChild(avail)
        }
        let oneCol6b = document.createElement("div");
        oneCol6b.setAttribute("class", "col-6");
        oneCol6b.setAttribute("style", "text-align : center")
        let btn = document.createElement("button");
        btn.setAttribute("class", "connect")
        let btnText = document.createTextNode("Connect")
        btn.appendChild(btnText)
        oneCol6b.appendChild(btn)
        divRowOne.appendChild(oneCol6a);
        divRowOne.appendChild(oneCol6b);
        divTopCover.appendChild(divRowOne);
        let divRowTwo = document.createElement("div");
        divRowTwo.setAttribute("class", "row");
        let col4 = document.createElement("div");
        col4.setAttribute("class", "col-4")
        let avatar = document.createElement("div");
        avatar.setAttribute("class", "avatar");
        col4.appendChild(avatar)
        divRowTwo.appendChild(col4)
        let col8 = document.createElement("div")
        col8.setAttribute("class", "col-8")
        let name = document.createElement("div")
        name.setAttribute("style", "padding : 10px 15px")
        let nameHead = document.createTextNode("Name : " + ele.NAME)
        name.appendChild(nameHead)
        let age = document.createElement("div")
        age.setAttribute("style", "padding : 10px 15px")
        let ageHead = document.createTextNode("Age : " + ele.DOB)
        age.appendChild(ageHead)
        let desc = document.createElement("div")
        desc.setAttribute("style", "padding : 10px 15px")
        let descHead = document.createTextNode("Description : " + ele.DESCRIPTION)
        desc.appendChild(descHead)
        col8.appendChild(name)
        col8.appendChild(age)
        col8.appendChild(desc)
        divRowTwo.appendChild(col8)
        divTopCover.appendChild(divRowTwo);
        // add at last 
        divTop.appendChild(divTopCover);
        document.getElementById("cards").appendChild(divTop)

      })
    }


    // $('.dropdown-toggle').click(function () {
    //   let query = {

    //   }
    //   console.log("sahii hain")
    //   fetch(`https://dscquadro.herokuapp.com/secure/filterdata?sort=-_id&limit=10&query={${query}}`, {
    //     method: "get",
    //     headers: {
    //       'Accept': 'application/json',
    //       'Content-Type': 'application/json',
    //       'Authorization': sessionStorage.getItem("token")
    //     },
    //     //make sure to serialize your JSON body
    //     // body: JSON.stringify({
    //     //     email : "nikhilsingh498@gmail.com"
    //     // })

    //     // PARAMS:{
    //     //   sort:-_id,
    //     //   limit:10,
    //     //   query:{}
    //     // }


    //   })
    //     .then((response) => {
    //       return response.json()
    //       //do something awesome that makes the world a better place
    //     })
    //     .then(data => console.log(data))
    // });



  </script>



  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
</body>

</html>